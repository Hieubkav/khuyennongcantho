---
title: Káº¿ hoáº¡ch phÃ¡t triá»ƒn Há»‡ Thá»‘ng Quáº£n LÃ½ GiÃ¡ NÃ´ng Sáº£n
description: Káº¿ hoáº¡ch Shape Up 12 giá» vÃ  Kanban thá»±c thi
---

# Káº¿ hoáº¡ch phÃ¡t triá»ƒn Há»‡ Thá»‘ng Quáº£n LÃ½ GiÃ¡ NÃ´ng Sáº£n

## ğŸ“Œ Káº¿ hoáº¡ch Shape Up

- Appetite: 12 giá» (hÃ´m nay).
- Shape â€“ Váº¥n Ä‘á»: Cáº§n MVP quáº£n lÃ½ vÃ  cÃ´ng bá»‘ giÃ¡ nÃ´ng sáº£n theo chá»£/sáº£n pháº©m/ngÃ y, cÃ³ RBAC cÆ¡ báº£n vÃ  trang tra cá»©u cÃ´ng khai, Ä‘á»ƒ triá»ƒn khai thÃ­ Ä‘iá»ƒm táº¡i Cáº§n ThÆ¡.
- Shape â€“ Ranh giá»›i: Chá»‰ triá»ƒn khai tá»‘i thiá»ƒu cho dá»¯ liá»‡u, nháº­p giÃ¡ Ä‘Æ¡n láº», CRUD danh má»¥c, báº£o vá»‡ truy cáº­p vÃ  má»™t trang tra cá»©u; khÃ´ng tá»‘i Æ°u UI phá»©c táº¡p, khÃ´ng bÃ¡o cÃ¡o nÃ¢ng cao, chÆ°a cáº§n cron/email cháº¡y tháº­t trong 12h.
- Shape â€“ Pháº¡m vi: Next.js 15 (App Router) + Convex (schema, server functions) + Auth.js (email/máº­t kháº©u) + trang Admin tá»‘i thiá»ƒu + trang Public `/tracuu` + seed Ä‘Æ¡n vá»‹ Ä‘o; history Ä‘Æ¡n giáº£n cho giÃ¡.
- Shape â€“ NgoÃ i pháº¡m vi: Dashboard thá»‘ng kÃª nÃ¢ng cao, nháº­p/xuáº¥t Excel/CSV hÃ ng loáº¡t, cron 16:30/23:55 cháº¡y tháº­t, email template hoÃ n chá»‰nh, SEO nÃ¢ng cao, giÃ¡m sÃ¡t Sentry, virtualization báº£ng lá»›n.
- Shape â€“ Giáº£i phÃ¡p phÃ¡c tháº£o: 
  - Convex: Ä‘á»‹nh nghÄ©a báº£ng `units, products, markets, profiles, market_members, prices, price_history` vÃ  hÃ m server CRUD + guards `requireAuth/requireRole/requireMarketAccess`.
  - Admin: layout tá»‘i giáº£n, báº£ng danh sÃ¡ch + form táº¡o/sá»­a cho `markets, products`, form nháº­p giÃ¡ (theo chá»£/ngÃ y/sáº£n pháº©m/Ä‘Æ¡n vá»‹/giÃ¡, validate cÆ¡ báº£n).
  - Public: trang `/tracuu` SSR Ä‘á»c tá»« Convex, lá»c theo chá»£/ngÃ y, báº£ng Ä‘Æ¡n giáº£n.
  - Auth: Auth.js Credentials (email/máº­t kháº©u), xÃ¡c thá»±c cÆ¡ báº£n, cháº·n truy cáº­p Admin khi chÆ°a Ä‘Äƒng nháº­p/khÃ´ng Ä‘á»§ quyá»n.

- Cycle (1 ngÃ y â€“ 12 tÃ­nh nÄƒng trá»ng tÃ¢m):
  1) Thiáº¿t láº­p mÃ´i trÆ°á»ng `.env.local` vÃ  káº¿t ná»‘i Convex
  2) Táº¡o schema Convex: `units, products, markets, prices, profiles, market_members`
  3) Seed danh má»¥c Ä‘Æ¡n vá»‹ Ä‘o máº·c Ä‘á»‹nh (`kg, g, táº¡, táº¥n, bÃ³, tÃºi, chai, lÃ­t, trÃ¡i, cÃ¢y, náº£i, chá»¥c`)
  4) Guards Convex: `requireAuth`, `requireRole('admin')`, `requireMarketAccess`
  5) Thiáº¿t láº­p Auth.js (Credentials) Ä‘Äƒng kÃ½/Ä‘Äƒng nháº­p cÆ¡ báº£n
  6) Admin layout + Ä‘iá»u hÆ°á»›ng cÆ¡ báº£n (`/admin`)
  7) Admin Markets: danh sÃ¡ch + táº¡o/sá»­a/kÃ­ch hoáº¡t tá»‘i thiá»ƒu
  8) Admin Products: danh sÃ¡ch + táº¡o/sá»­a/kÃ­ch hoáº¡t tá»‘i thiá»ƒu
  9) Admin Prices: form nháº­p giÃ¡ theo chá»£/ngÃ y + validate (`>0`, khÃ´ng ngÃ y tÆ°Æ¡ng lai)
  10) Ghi `price_history` before/after khi táº¡o/cáº­p nháº­t giÃ¡
  11) Public `/tracuu`: báº£ng xem giÃ¡ theo chá»£/ngÃ y (SSR, phÃ¢n trang Ä‘Æ¡n giáº£n)
  12) Landing page: hiá»ƒn thá»‹ dá»¯ liá»‡u `data_khuyennong` tá»‘i thiá»ƒu

- Deliverables (demo/ship Ä‘Æ°á»£c):
  - Repo cháº¡y `apps/web` káº¿t ná»‘i Convex, cÃ³ Auth hoáº¡t Ä‘á»™ng á»Ÿ `/admin`.
  - CRUD tá»‘i thiá»ƒu cho chá»£ vÃ  sáº£n pháº©m; seed Ä‘Æ¡n vá»‹ Ä‘o.
  - Form nháº­p giÃ¡ ghi dá»¯ liá»‡u vÃ  sinh `price_history`.
  - Trang `/tracuu` cÃ´ng khai hiá»ƒn thá»‹ báº£ng giÃ¡ theo chá»£/ngÃ y.
  - Landing page hiá»ƒn thá»‹ mÃ´ táº£/data tÄ©nh `data_khuyennong`.

- Risks/Trade-offs:
  - Thá»i gian gáº¥p: cáº¯t bá»›t polish UI; cháº¥p nháº­n báº£ng/ form tá»‘i giáº£n.
  - Auth/email: chá»‰ dÃ¹ng Credentials, bá» xÃ¡c minh email Ä‘á»ƒ giáº£m Ä‘á»™ phá»©c táº¡p.
  - Dá»¯ liá»‡u lá»›n: chÆ°a tá»‘i Æ°u virtualization; cháº¥p nháº­n phÃ¢n trang Ä‘Æ¡n giáº£n.
  - RBAC chi tiáº¿t theo chá»£: triá»ƒn khai guard theo `marketId` á»Ÿ má»©c tá»‘i thiá»ƒu.
  - SEO nÃ¢ng cao: lÃ¹i sau; chá»‰ meta cÆ¡ báº£n náº¿u ká»‹p.
  - Cron/email: chÆ°a báº­t tháº­t; Ä‘á»ƒ sau khi cÃ³ dá»¯ liá»‡u á»•n Ä‘á»‹nh.

- Assumptions (giáº£ Ä‘á»‹nh khi thiáº¿u thÃ´ng tin):
  - ÄÃ£ cÃ³ dá»± Ã¡n Convex (Cloud hoáº·c local) kháº£ dá»¥ng cho mÃ´i trÆ°á»ng dev.
  - KhÃ³a `NEXT_PUBLIC_CONVEX_URL` cÃ³ thá»ƒ cáº¥p trong ngÃ y hÃ´m nay.
  - Sá»­ dá»¥ng Auth.js Credentials provider (email/máº­t kháº©u) cho tá»‘c Ä‘á»™.
  - ChÆ°a cáº§n xÃ¡c minh email vÃ  reset password trong 12h.
  - `data_khuyennong` sáºµn trong repo hoáº·c cÃ³ JSON tÄ©nh Ä‘á»ƒ render landing.
  - UI dÃ¹ng Tailwind/shadcn sáºµn, nhÆ°ng cháº¥p nháº­n HTML/TSX tá»‘i giáº£n khi thiáº¿u.
  - Báº£ng `/tracuu` chá»‰ lá»c theo chá»£/ngÃ y, chÆ°a cáº§n lá»c nÃ¢ng cao.
  - ÄÆ¡n vá»‹ Ä‘o máº·c Ä‘á»‹nh Ä‘á»§ dÃ¹ng cho demo, cÃ³ thá»ƒ chá»‰nh sau.
  - Má»‘c thá»i gian/ timezone dÃ¹ng `Asia/Ho_Chi_Minh` nhÆ°ng chÆ°a cáº§n cron.
  - Audit nÃ¢ng cao, RBAC chi tiáº¿t theo thao tÃ¡c sáº½ lÃ m sau; hiá»‡n táº¡i tá»‘i thiá»ƒu.
  - KhÃ´ng yÃªu cáº§u nháº­p/xuáº¥t Excel/CSV trong 12h Ä‘áº§u.
  - Cháº¡y cá»¥c bá»™ vá»›i Node/Bun cÃ³ sáºµn; khÃ´ng cáº¥u hÃ¬nh CI phá»©c táº¡p.
  - Sentry/giÃ¡m sÃ¡t Ä‘á»ƒ sau; Æ°u tiÃªn tÃ­nh nÄƒng cháº¡y Ä‘Æ°á»£c.
  - PhÃ¢n quyá»n: `admin | member`; admin toÃ n quyá»n, member bá»‹ giá»›i háº¡n theo chá»£.
  - Dá»¯ liá»‡u Ä‘á»‹a giá»›i VN cÃ³ thá»ƒ dÃ¹ng JSON gá»n/Ä‘á»§ cho chá»n chá»£ (Ä‘Æ¡n giáº£n hÃ³a).

- Definition of Done (DoD):
  - CÃ³ thá»ƒ Ä‘Äƒng kÃ½/Ä‘Äƒng nháº­p vÃ  truy cáº­p `/admin` theo vai trÃ².
  - Táº¡o/sá»­a Ä‘Æ°á»£c chá»£ vÃ  sáº£n pháº©m trong Admin, dá»¯ liá»‡u lÆ°u á»Ÿ Convex.
  - Nháº­p giÃ¡ há»£p lá»‡ vÃ  sinh báº£n ghi `price_history` trÆ°á»›c/sau.
  - Trang `/tracuu` hiá»ƒn thá»‹ Ä‘Ãºng dá»¯ liá»‡u theo chá»£/ngÃ y (SSR) vÃ  phÃ¢n trang cÆ¡ báº£n.
  - Landing page hiá»ƒn thá»‹ ná»™i dung/data mÃ´ táº£ dá»± Ã¡n.
  - KhÃ´ng lá»—i nghiÃªm trá»ng trÃªn console, build dev cháº¡y Ä‘Æ°á»£c.

## ğŸ“‹ Kanban board HTML

<style>{`
  .board { max-width: 1200px; margin: 16px auto; padding: 0 12px; }
  .kanban { display: flex; gap: 12px; align-items: flex-start; }
  .col { flex: 1; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; min-height: 300px; }
  .col h3 { margin: 0 0 8px 0; font-size: 16px; display: flex; justify-content: space-between; align-items: center; }
  .wip { font-size: 12px; color: #6b7280; }
  .card { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 8px; padding: 10px 12px; margin: 8px 0; box-shadow: 0 1px 2px rgba(0,0,0,0.03); }
  .card strong { display: block; margin-bottom: 6px; }
  .hint { font-size: 12px; color: #6b7280; }
  @media (max-width: 900px) {
    .kanban { flex-direction: column; }
  }
`}</style>

<div className="board">
  <div className="kanban">
    <div className="col">
      <h3>Todo</h3>
      <div className="card">
        <strong>Thiáº¿t láº­p mÃ´i trÆ°á»ng .env.local</strong>
        <div className="hint">Äáº§u ra: cáº¥u hÃ¬nh `NEXT_PUBLIC_CONVEX_URL`, biáº¿n Auth.</div>
      </div>
      <div className="card">
        <strong>Táº¡o schema Convex cho danh má»¥c</strong>
        <div className="hint">Äáº§u ra: báº£ng `units, products, markets, profiles, market_members, prices`.</div>
      </div>
      <div className="card">
        <strong>Seed Ä‘Æ¡n vá»‹ Ä‘o máº·c Ä‘á»‹nh</strong>
        <div className="hint">Äáº§u ra: record `kg, g, táº¡, táº¥n, bÃ³, tÃºi, chai, lÃ­t, trÃ¡i, cÃ¢y, náº£i, chá»¥c`.</div>
      </div>
      <div className="card">
        <strong>Triá»ƒn khai guards truy cáº­p</strong>
        <div className="hint">Äáº§u ra: `requireAuth`, `requireRole('admin')`, `requireMarketAccess`.</div>
      </div>
      <div className="card">
        <strong>Cáº¥u hÃ¬nh Auth.js (Credentials)</strong>
        <div className="hint">Äáº§u ra: Ä‘Äƒng kÃ½/Ä‘Äƒng nháº­p hoáº¡t Ä‘á»™ng, session báº£o vá»‡ `/admin`.</div>
      </div>
      <div className="card">
        <strong>Táº¡o layout vÃ  nav cho Admin</strong>
        <div className="hint">Äáº§u ra: `/admin` cÃ³ sidebar/topbar tá»‘i giáº£n.</div>
      </div>
      <div className="card">
        <strong>XÃ¢y danh sÃ¡ch + táº¡o/sá»­a Chá»£</strong>
        <div className="hint">Äáº§u ra: CRUD tá»‘i thiá»ƒu báº£ng `markets`.</div>
      </div>
      <div className="card">
        <strong>XÃ¢y danh sÃ¡ch + táº¡o/sá»­a Sáº£n pháº©m</strong>
        <div className="hint">Äáº§u ra: CRUD tá»‘i thiá»ƒu báº£ng `products`.</div>
      </div>
      <div className="card">
        <strong>Táº¡o form nháº­p giÃ¡ theo chá»£/ngÃ y</strong>
        <div className="hint">Äáº§u ra: ghi `prices` vá»›i validate `>0`, khÃ´ng ngÃ y tÆ°Æ¡ng lai.</div>
      </div>
      <div className="card">
        <strong>Ghi lá»‹ch sá»­ thay Ä‘á»•i giÃ¡</strong>
        <div className="hint">Äáº§u ra: táº¡o `price_history` before/after khi insert/update.</div>
      </div>
      <div className="card">
        <strong>XÃ¢y trang cÃ´ng khai /tracuu</strong>
        <div className="hint">Äáº§u ra: báº£ng giÃ¡ theo chá»£/ngÃ y (SSR), phÃ¢n trang Ä‘Æ¡n giáº£n.</div>
      </div>
      <div className="card">
        <strong>HoÃ n thiá»‡n landing vá»›i data_khuyennong</strong>
        <div className="hint">Äáº§u ra: render mÃ´ táº£/data tÄ©nh trÃªn trang chá»§.</div>
      </div>
    </div>

    <div className="col">
      <h3>Doing <span className="wip">(WIP â‰¤ 3)</span></h3>
      {/* Giá»¯ tá»‘i Ä‘a 3 tháº» á»Ÿ Ä‘Ã¢y */}
      <div className="card">
        <strong>Thiáº¿t láº­p mÃ´i trÆ°á»ng .env.local</strong>
        <div className="hint">Äáº§u ra: biáº¿n mÃ´i trÆ°á»ng sáºµn sÃ ng cho dev.</div>
      </div>
      <div className="card">
        <strong>Táº¡o schema Convex cho danh má»¥c</strong>
        <div className="hint">Äáº§u ra: schema vÃ  index cÆ¡ báº£n.</div>
      </div>
    </div>

    <div className="col">
      <h3>Done</h3>
      {/* Ban Ä‘áº§u Ä‘á»ƒ trá»‘ng */}
    </div>
  </div>
</div>
